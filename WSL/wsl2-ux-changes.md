---
title: Alterações de experiência do usuário entre WSL 1 e WSL 2
description: Alterações de experiência do usuário entre WSL 1 e WSL 2
keywords: BashOnWindows, bash, wsl, wsl2, windows, subsistema do windows para linux, windowssubsystem, ubuntu, debian, suse, windows 10
ms.date: 05/30/2019
ms.topic: article
ms.assetid: 7afaeacf-435a-4e58-bff0-a9f0d75b8a51
ms.custom: seodec18
ms.localizationpriority: high
ms.openlocfilehash: 1965a22a2e290777b207d9ded099ce4a79e1ed38
ms.sourcegitcommit: 0a001ada2131f80dd77b114fc14f2fde43c947ad
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/25/2020
ms.locfileid: "80256329"
---
# <a name="user-experience-changes-between-wsl-1-and-wsl-2"></a><span data-ttu-id="8c794-104">Alterações de experiência do usuário entre WSL 1 e WSL 2</span><span class="sxs-lookup"><span data-stu-id="8c794-104">User Experience Changes Between WSL 1 and WSL 2</span></span>

<span data-ttu-id="8c794-105">Esta página aborda as diferenças de experiência do usuário entre o WSL 1 e a versão prévia do WSL 2.</span><span class="sxs-lookup"><span data-stu-id="8c794-105">This page goes over the user experience differences between WSL 1 and the WSL 2 preview.</span></span> <span data-ttu-id="8c794-106">As principais alterações a serem observadas são:</span><span class="sxs-lookup"><span data-stu-id="8c794-106">The key changes to be aware of are:</span></span>

- <span data-ttu-id="8c794-107">Coloque os arquivos que seus aplicativos Linux acessarão no sistema de arquivos raiz do Linux para agilizar a velocidade de desempenho do arquivo</span><span class="sxs-lookup"><span data-stu-id="8c794-107">Place files that your Linux apps will access in your Linux root file system for faster file performance speed</span></span>
- <span data-ttu-id="8c794-108">Em builds iniciais de versão prévia do WSL 2, você precisará acessar aplicativos de rede usando um endereço IP e não um localhost</span><span class="sxs-lookup"><span data-stu-id="8c794-108">In initial builds of the WSL 2 preview you will need to access network applications using an IP address and not using localhost</span></span>

<span data-ttu-id="8c794-109">Abaixo está a lista completa de outras alterações que você poderá observar:</span><span class="sxs-lookup"><span data-stu-id="8c794-109">And below is the full list of other changes that you may notice:</span></span>

- <span data-ttu-id="8c794-110">O WSL 2 usa um VHD [(Disco de Hardware Virtual)](https://en.wikipedia.org/wiki/VHD_(file_format)) para armazenar seus arquivos e, se você atingir o tamanho máximo, talvez seja necessário expandi-lo</span><span class="sxs-lookup"><span data-stu-id="8c794-110">WSL 2 uses a [Virtual Hardware Disk](https://en.wikipedia.org/wiki/VHD_(file_format)) (VHD) to store your files and if you reach its max size you may need to expand it</span></span>
- <span data-ttu-id="8c794-111">Ao iniciar, o WSL 2 usará uma pequena proporção de memória</span><span class="sxs-lookup"><span data-stu-id="8c794-111">When starting, WSL 2 will now use a small proportion of memory</span></span>
- <span data-ttu-id="8c794-112">A velocidade cruzada de acesso ao arquivo do sistema operacional será mais lenta em builds iniciais de versão prévia</span><span class="sxs-lookup"><span data-stu-id="8c794-112">Cross OS file access speed will be slower in initial preview builds</span></span>

## <a name="place-your-linux-files-in-your-linux-root-file-system"></a><span data-ttu-id="8c794-113">Colocar os arquivos do Linux no sistema de arquivos raiz do Linux</span><span class="sxs-lookup"><span data-stu-id="8c794-113">Place your Linux files in your Linux root file system</span></span>
<span data-ttu-id="8c794-114">Coloque os arquivos que serão acessados com frequência com aplicativos Linux dentro do seu sistema de arquivos raiz do Linux para aproveitar os benefícios de desempenho do arquivo.</span><span class="sxs-lookup"><span data-stu-id="8c794-114">Make sure to put the files that you will be accessing frequently with Linux applications inside of your Linux root file system to enjoy the file performance benefits.</span></span> <span data-ttu-id="8c794-115">Esses arquivos precisam estar dentro do sistema de arquivos raiz do Linux para terem acesso mais rápido ao sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="8c794-115">These files have to be inside of the Linux root file system to have faster file system access.</span></span> <span data-ttu-id="8c794-116">Também possibilitamos que os aplicativos do Windows acessassem o sistema de arquivos raiz do Linux (como o Explorador de Arquivos!</span><span class="sxs-lookup"><span data-stu-id="8c794-116">We have also made it possible for Windows apps to access the Linux root file system (like File Explorer!</span></span> <span data-ttu-id="8c794-117">Tente executar: `explorer.exe .` no diretório base de sua distribuição do Linux e veja o que acontece), o que tornará essa transição significativamente mais fácil.</span><span class="sxs-lookup"><span data-stu-id="8c794-117">Try running: `explorer.exe .` in the home directory of your Linux distro and see what happens) which will make this transition significantly easier.</span></span> 

## <a name="accessing-network-applications"></a><span data-ttu-id="8c794-118">Acessar aplicativos de rede</span><span class="sxs-lookup"><span data-stu-id="8c794-118">Accessing network applications</span></span>
<span data-ttu-id="8c794-119">Nos builds iniciais de versão prévia do WSL 2, você precisará acessar um servidor Windows no Linux usando o endereço IP do seu computador host.</span><span class="sxs-lookup"><span data-stu-id="8c794-119">In the initial builds of the WSL 2 preview, you will need to access any Windows server from Linux using the IP address of your host machine.</span></span>

### <a name="accessing-windows-applications-from-linux"></a><span data-ttu-id="8c794-120">Acessar aplicativos do Windows no Linux</span><span class="sxs-lookup"><span data-stu-id="8c794-120">Accessing Windows applications from Linux</span></span>
<span data-ttu-id="8c794-121">Para acessar um aplicativo de rede do Windows, você precisará usar o endereço IP do seu computador host.</span><span class="sxs-lookup"><span data-stu-id="8c794-121">To access a Windows network application you'll need to use the IP address of your host machine.</span></span> <span data-ttu-id="8c794-122">Você pode fazer isso com estas etapas:</span><span class="sxs-lookup"><span data-stu-id="8c794-122">You can do so with these steps:</span></span>

- <span data-ttu-id="8c794-123">Obtenha o endereço IP do seu computador host executando o comando `cat /etc/resolv.conf` e copiando o endereço IP após o termo `nameserver`.</span><span class="sxs-lookup"><span data-stu-id="8c794-123">Obtain the IP address of your host machine by running the command `cat /etc/resolv.conf` and copying the IP address following the term `nameserver`.</span></span> 
- <span data-ttu-id="8c794-124">Conecte-se a qualquer servidor Windows usando o endereço IP copiado.</span><span class="sxs-lookup"><span data-stu-id="8c794-124">Connect to any Windows server using the copied IP address.</span></span>

<span data-ttu-id="8c794-125">A imagem abaixo mostra um exemplo disso por meio da conexão com um servidor Node.js em execução no Windows via curl.</span><span class="sxs-lookup"><span data-stu-id="8c794-125">The picture below shows an example of this by connecting to a Node.js server running in Windows via curl.</span></span> 

![Acessar aplicativos de rede do Linux usando o Windows](media/wsl2-network-l2w.png)

### <a name="accessing-linux-applications-from-windows"></a><span data-ttu-id="8c794-127">Acessar aplicativos do Linux usando o Windows</span><span class="sxs-lookup"><span data-stu-id="8c794-127">Accessing Linux applications from Windows</span></span>

<span data-ttu-id="8c794-128">Dependendo da versão do Windows que você está usando, talvez seja necessário recuperar o endereço IP da máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8c794-128">Depending on which version of Windows you're using, you might need to retrieve the IP address of the virtual machine.</span></span> <span data-ttu-id="8c794-129">Se seu build for o 18945 ou superior, você poderá usar o `localhost` normalmente.</span><span class="sxs-lookup"><span data-stu-id="8c794-129">If your build is 18945 or higher, you can use `localhost` just like normal.</span></span> 

#### <a name="accessing-linux-on-builds-lower-than-18945"></a><span data-ttu-id="8c794-130">Acessar o Linux em builds anteriores a [18945](https://blogs.windows.com/windowsexperience/2019/07/26/announcing-windows-10-insider-preview-build-18945/)</span><span class="sxs-lookup"><span data-stu-id="8c794-130">Accessing Linux on Builds lower than [18945](https://blogs.windows.com/windowsexperience/2019/07/26/announcing-windows-10-insider-preview-build-18945/)</span></span>

<span data-ttu-id="8c794-131">Se você tiver um servidor em uma distribuição do WSL, precisará encontrar o endereço IP da máquina virtual que está acionando sua distribuição e conectar-se a ela.</span><span class="sxs-lookup"><span data-stu-id="8c794-131">If you have a server in a WSL distro, you'll need to find the IP address of the virtual machine powering your distro and connect to it with that IP address.</span></span> <span data-ttu-id="8c794-132">Você pode fazer isso seguindo estas etapas:</span><span class="sxs-lookup"><span data-stu-id="8c794-132">You can do that by following these steps:</span></span>

- <span data-ttu-id="8c794-133">Obtenha o endereço IP da sua distribuição executando o comando `ip addr` dentro da distribuição do WSL e encontrando-o sob o valor `inet` da interface `eth0`.</span><span class="sxs-lookup"><span data-stu-id="8c794-133">Obtain the IP address of your distro by running the command `ip addr` inside of your WSL distro and finding it under the `inet` value of the `eth0` interface.</span></span>
   - <span data-ttu-id="8c794-134">Você pode encontrar isso mais facilmente filtrando a saída do comando usando grep da seguinte maneira: `ip addr | grep eth0`.</span><span class="sxs-lookup"><span data-stu-id="8c794-134">You can find this more easily by filtering the output of the command using grep like so: `ip addr | grep eth0`.</span></span>
- <span data-ttu-id="8c794-135">Conecte-se ao seu servidor Linux usando o IP encontrado acima.</span><span class="sxs-lookup"><span data-stu-id="8c794-135">Connect to your Linux server using the IP you found above.</span></span>

<span data-ttu-id="8c794-136">A imagem abaixo mostra um exemplo disso por meio da conexão com um servidor Node.js usando o navegador Edge.</span><span class="sxs-lookup"><span data-stu-id="8c794-136">The picture below shows an example of this by connecting to a Node.js server using the Edge browser.</span></span>

![Acessar aplicativos de rede do Linux usando o Windows](media/wsl2-network-w2l.jpg)

### <a name="other-networking-considerations"></a><span data-ttu-id="8c794-138">Outras considerações de rede</span><span class="sxs-lookup"><span data-stu-id="8c794-138">Other networking considerations</span></span>

#### <a name="connecting-via-remote-ip-addresses"></a><span data-ttu-id="8c794-139">Conectar-se via endereços IP remotos</span><span class="sxs-lookup"><span data-stu-id="8c794-139">Connecting via remote IP addresses</span></span>

<span data-ttu-id="8c794-140">Ao usar endereços IP remotos para se conectar aos seus aplicativos, eles serão tratados como conexões de LAN (rede local).</span><span class="sxs-lookup"><span data-stu-id="8c794-140">When using remote IP addresses to connect to your applications, they will be treated as connections from the Local Area Network (LAN).</span></span> <span data-ttu-id="8c794-141">Isso significa que você precisará verificar se seu aplicativo pode aceitar conexões de LAN, ou seja: talvez seja necessário associar seu aplicativo a `0.0.0.0` em vez de `127.0.0.1`.</span><span class="sxs-lookup"><span data-stu-id="8c794-141">This means that you will need to make sure your application can accept LAN connections, i.e: You might need to bind your application to `0.0.0.0` instead of `127.0.0.1`.</span></span> <span data-ttu-id="8c794-142">Por exemplo, no Python usando Flask, isso pode ser feito com o comando: `app.run(host='0.0.0.0')`.</span><span class="sxs-lookup"><span data-stu-id="8c794-142">For example in python using flask this can be done with the command: `app.run(host='0.0.0.0')`.</span></span> <span data-ttu-id="8c794-143">Tenha em mente a segurança ao fazer essas alterações, pois isso permitirá conexões de sua LAN.</span><span class="sxs-lookup"><span data-stu-id="8c794-143">Please keep security in mind when making these changes, as this will allow connections from your LAN.</span></span> 

#### <a name="accessing-a-wsl2-distro-from-your-local-area-network-lan"></a><span data-ttu-id="8c794-144">Acessar uma distribuição do WSL2 usando a LAN (rede local)</span><span class="sxs-lookup"><span data-stu-id="8c794-144">Accessing a WSL2 distro from your local area network (LAN)</span></span>

<span data-ttu-id="8c794-145">Ao usar uma distribuição do WSL 1, se o computador tiver sido configurado para ser acessado pela sua LAN, os aplicativos executados no WSL também poderão ser acessados em sua LAN.</span><span class="sxs-lookup"><span data-stu-id="8c794-145">When using a WSL1 distro, if your computer was set up to be accessed by in your LAN, then applications run in WSL could be accessed on your LAN as well.</span></span> <span data-ttu-id="8c794-146">Esse não é o caso padrão no WSL2, pois o WSL2 tem um adaptador Ethernet virtualizado com o próprio endereço IP.</span><span class="sxs-lookup"><span data-stu-id="8c794-146">This isn't the default case in WSL2, as WSL2 has a virtualized ethernet adapter with its own IP address.</span></span> <span data-ttu-id="8c794-147">No momento, para habilitar esse fluxo de trabalho, será necessário percorrer as mesmas etapas que você faria para uma máquina virtual normal.</span><span class="sxs-lookup"><span data-stu-id="8c794-147">Currently, to enable this workflow you will need to go through the same steps as you would for a regular virtual machine.</span></span> <span data-ttu-id="8c794-148">Estamos analisando maneiras de aprimorar essa experiência!</span><span class="sxs-lookup"><span data-stu-id="8c794-148">We are looking into ways to improve this experience!</span></span>

#### <a name="ipv6-access"></a><span data-ttu-id="8c794-149">Acesso IPv6</span><span class="sxs-lookup"><span data-stu-id="8c794-149">IPv6 access</span></span>

<span data-ttu-id="8c794-150">Atualmente, as distribuições do WSL 2 não conseguem acessar endereços IPv6.</span><span class="sxs-lookup"><span data-stu-id="8c794-150">WSL2 distros currently cannot reach IPv6 only addresses.</span></span> <span data-ttu-id="8c794-151">Estamos trabalhando para adicionar esse recurso.</span><span class="sxs-lookup"><span data-stu-id="8c794-151">We are working on adding this feature.</span></span>

## <a name="understanding-wsl-2-uses-a-vhd-and-what-to-do-if-you-reach-its-max-size"></a><span data-ttu-id="8c794-152">Entender como o WSL 2 usa um VHD e o que fazer se você atingir o tamanho máximo</span><span class="sxs-lookup"><span data-stu-id="8c794-152">Understanding WSL 2 uses a VHD, and what to do if you reach its max size</span></span>
<span data-ttu-id="8c794-153">O WSL 2 armazena todos os arquivos do Linux dentro de um VHD que usa o sistema de arquivos ext4.</span><span class="sxs-lookup"><span data-stu-id="8c794-153">WSL 2 stores all your Linux files inside of a VHD that uses the ext4 file system.</span></span> <span data-ttu-id="8c794-154">Esse VHD é redimensionado automaticamente para atender às suas necessidades de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="8c794-154">This VHD automatically resizes to meet your storage needs.</span></span> <span data-ttu-id="8c794-155">O VHD também tem um tamanho máximo inicial de 256 GB.</span><span class="sxs-lookup"><span data-stu-id="8c794-155">This VHD also has an initial max size of 256GB.</span></span> <span data-ttu-id="8c794-156">Se sua distribuição aumentar de tamanho para exceder 256 GB, você verá erros informando que você ficou sem espaço em disco.</span><span class="sxs-lookup"><span data-stu-id="8c794-156">If your distro grows in size to be greater than 256GB you will see errors stating that you've run out of disk space.</span></span> <span data-ttu-id="8c794-157">Você pode corrigir isso expandindo o tamanho do VHD.</span><span class="sxs-lookup"><span data-stu-id="8c794-157">You can fix these by expanding the VHD size.</span></span> <span data-ttu-id="8c794-158">Instruções sobre como fazer isto podem ser vistas abaixo:</span><span class="sxs-lookup"><span data-stu-id="8c794-158">Instructions on how to do so are below:</span></span>

1. <span data-ttu-id="8c794-159">Termine todas as instâncias WSL usando o comando `wsl --shutdown`</span><span class="sxs-lookup"><span data-stu-id="8c794-159">Terminate all WSL instances using the `wsl --shutdown` command</span></span>
2. <span data-ttu-id="8c794-160">Localize o nome do pacote de instalação da distribuição, 'PackageFamilyName'</span><span class="sxs-lookup"><span data-stu-id="8c794-160">Find your distro installation package name 'PackageFamilyName'</span></span>
   - <span data-ttu-id="8c794-161">Em um prompt do PowerShell (em que 'distro' é o nome da distribuição), digite:</span><span class="sxs-lookup"><span data-stu-id="8c794-161">In a powershell prompt (where 'distro' is your distribution name) type:</span></span>
      - `Get-AppxPackage -Name "*<distro>*" | Select PackageFamilyName`
3. <span data-ttu-id="8c794-162">Localize o caminho completo do arquivo VHD usado pela sua instalação do WSL 2, que será o seu 'pathToVHD':</span><span class="sxs-lookup"><span data-stu-id="8c794-162">Locate the VHD file fullpath used by your WSL 2 installation, this will be your 'pathToVHD':</span></span>
     - `%LOCALAPPDATA%\Packages\<PackageFamilyName>\LocalState\<disk>.vhdx`
4. <span data-ttu-id="8c794-163">Redimensione o VHD do WSL 2 concluindo os seguintes comandos</span><span class="sxs-lookup"><span data-stu-id="8c794-163">Resize your WSL 2 VHD by completing the following commands</span></span>
   - <span data-ttu-id="8c794-164">Abra um prompt de comando com privilégios de administrador do Windows e execute os seguintes comandos:</span><span class="sxs-lookup"><span data-stu-id="8c794-164">Open a command prompt Window with admin privileges and run the following commands:</span></span>
      - `diskpart`
      - `Select vdisk file="<pathToVHD>"`
      - `expand vdisk maximum="<sizeInMegaBytes>"`
5. <span data-ttu-id="8c794-165">Inicie a distribuição do WSL</span><span class="sxs-lookup"><span data-stu-id="8c794-165">Launch your WSL distro</span></span>
6. <span data-ttu-id="8c794-166">Faça com que o WSL saiba que ele pode expandir o tamanho do sistema de arquivos</span><span class="sxs-lookup"><span data-stu-id="8c794-166">Make WSL aware that it can expand its file system's size</span></span>
   - <span data-ttu-id="8c794-167">Execute estes comandos em sua distribuição do WSL:</span><span class="sxs-lookup"><span data-stu-id="8c794-167">Run these commands in your WSL distro:</span></span>
      - `sudo mount -t devtmpfs none /dev`
      - `mount | grep ext4`
         - <span data-ttu-id="8c794-168">Copie o nome dessa entrada, que terá a seguinte aparência: /dev/sdXX (com o X representando qualquer outro caractere)</span><span class="sxs-lookup"><span data-stu-id="8c794-168">Copy the name of this entry, which will look like: /dev/sdXX (with the X representing any other character)</span></span>
      - `sudo resize2fs /dev/sdXX`
         - <span data-ttu-id="8c794-169">Use o valor copiado anteriormente. Talvez seja necessário usar: `apt install resize2fs`.</span><span class="sxs-lookup"><span data-stu-id="8c794-169">Make sure to use the value you copied earlier, and you may need to use: `apt install resize2fs`.</span></span>

<span data-ttu-id="8c794-170">Observe: em geral, não modifique, mova ou acesse os arquivos relacionados ao WSL localizados dentro da sua pasta AppData usando as ferramentas ou os editores do Windows.</span><span class="sxs-lookup"><span data-stu-id="8c794-170">Please note: In general do not modify, move, or access the WSL related files located inside of your AppData folder using Windows tools or editors.</span></span> <span data-ttu-id="8c794-171">Isso pode fazer com que a distribuição do Linux fique corrompida.</span><span class="sxs-lookup"><span data-stu-id="8c794-171">Doing so could cause your Linux distro to become corrupted.</span></span>

## <a name="wsl-2-will-use-some-memory-on-startup"></a><span data-ttu-id="8c794-172">O WSL 2 usará um pouco da memória na inicialização</span><span class="sxs-lookup"><span data-stu-id="8c794-172">WSL 2 will use some memory on startup</span></span>
<span data-ttu-id="8c794-173">O WSL 2 usa uma VM de utilitário leve em um kernel real do Linux para fornecer excelente desempenho do sistema de arquivos e compatibilidade completa de chamada do sistema, enquanto ainda é tão leve, rápido, integrado e responsivo quanto o WSL 1.</span><span class="sxs-lookup"><span data-stu-id="8c794-173">WSL 2 uses a lightweight utility VM on a real Linux kernel to provide great file system performance and full system call compatibility while still being just as light, fast, integrated and responsive as WSL 1.</span></span> <span data-ttu-id="8c794-174">Essa VM do utilitário tem um pequeno volume de memória e alocará memória com suporte de endereço virtual na inicialização.</span><span class="sxs-lookup"><span data-stu-id="8c794-174">This utility VM has a small memory footprint and will allocate Virtual Address backed memory on startup.</span></span> <span data-ttu-id="8c794-175">Ela é configurada para começar com uma pequena proporção da memória total.</span><span class="sxs-lookup"><span data-stu-id="8c794-175">It is configured to start with a small proportion of your total memory.</span></span>

## <a name="cross-os-file-speed-will-be-slower-in-initial-preview-builds"></a><span data-ttu-id="8c794-176">A velocidade cruzada do arquivo do sistema operacional será mais lenta em builds iniciais de versão prévia</span><span class="sxs-lookup"><span data-stu-id="8c794-176">Cross OS file speed will be slower in initial preview builds</span></span>
<span data-ttu-id="8c794-177">Você perceberá velocidades de arquivo mais lentas em comparação com o WSL 1 ao acessar arquivos do Windows em um aplicativo do Linux ou acessar arquivos do Linux em aplicativos do Windows.</span><span class="sxs-lookup"><span data-stu-id="8c794-177">You will notice slower file speeds compared to WSL 1 when accessing Windows files from a Linux application, or accessing Linux files from a Windows application.</span></span> <span data-ttu-id="8c794-178">Isso é resultado das alterações de arquitetura no WSL 2. A equipe do WSL está investigando ativamente como podemos aprimorar essa experiência.</span><span class="sxs-lookup"><span data-stu-id="8c794-178">This is a result of the architectural changes in WSL 2, and is something that the WSL team is actively investigating on how we can improve this experience.</span></span>
